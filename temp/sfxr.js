var SOUND_VOL=.25,SAMPLE_RATE=5512,BIT_DEPTH=8,SQUARE=0,SAWTOOTH=1,SINE=2,NOISE=3,TRIANGLE=4,BREAKER=5,SHAPES="square sawtooth sine noise triangle breaker".split(" "),AUDIO_CONTEXT;function checkAudioContextExists(){try{null==AUDIO_CONTEXT&&("undefined"!=typeof AudioContext?AUDIO_CONTEXT=new AudioContext:"undefined"!=typeof webkitAudioContext&&(AUDIO_CONTEXT=new webkitAudioContext))}catch(a){window.console.log(a)}}checkAudioContextExists();var masterVolume=1;
function Params(){var a={};a.wave_type=SQUARE;a.p_env_attack=0;a.p_env_sustain=.3;a.p_env_punch=0;a.p_env_decay=.4;a.p_base_freq=.3;a.p_freq_limit=0;a.p_freq_ramp=0;a.p_freq_dramp=0;a.p_vib_strength=0;a.p_vib_speed=0;a.p_arp_mod=0;a.p_arp_speed=0;a.p_duty=0;a.p_duty_ramp=0;a.p_repeat_speed=0;a.p_pha_offset=0;a.p_pha_ramp=0;a.p_lpf_freq=1;a.p_lpf_ramp=0;a.p_lpf_resonance=0;a.p_hpf_freq=0;a.p_hpf_ramp=0;a.sound_vol=.5;a.sample_rate=44100;a.bit_depth=8;return a}var rng,seeded=!1;
function frnd(a){return seeded?rng.uniform()*a:Math.random()*a}function rnd(a){return seeded?Math.floor(rng.uniform()*(a+1)):Math.floor(Math.random()*(a+1))}function pickupCoin(){var a=Params();a.wave_type=Math.floor(frnd(SHAPES.length));3===a.wave_type&&(a.wave_type=0);a.p_base_freq=.4+frnd(.5);a.p_env_attack=0;a.p_env_sustain=frnd(.1);a.p_env_decay=.1+frnd(.4);a.p_env_punch=.3+frnd(.3);if(rnd(1)){a.p_arp_speed=.5+frnd(.2);var b=(frnd(7)|1)+1,h=b+(frnd(7)|1)+2;a.p_arp_mod=+b/+h}return a}
function laserShoot(){var a=Params();a.wave_type=rnd(2);a.wave_type===SINE&&rnd(1)&&(a.wave_type=rnd(1));a.wave_type=Math.floor(frnd(SHAPES.length));3===a.wave_type&&(a.wave_type=SQUARE);a.p_base_freq=.5+frnd(.5);a.p_freq_limit=a.p_base_freq-.2-frnd(.6);.2>a.p_freq_limit&&(a.p_freq_limit=.2);a.p_freq_ramp=-.15-frnd(.2);0===rnd(2)&&(a.p_base_freq=.3+frnd(.6),a.p_freq_limit=frnd(.1),a.p_freq_ramp=-.35-frnd(.3));rnd(1)?(a.p_duty=frnd(.5),a.p_duty_ramp=frnd(.2)):(a.p_duty=.4+frnd(.5),a.p_duty_ramp=-frnd(.7));
a.p_env_attack=0;a.p_env_sustain=.1+frnd(.2);a.p_env_decay=frnd(.4);rnd(1)&&(a.p_env_punch=frnd(.3));0===rnd(2)&&(a.p_pha_offset=frnd(.2),a.p_pha_ramp=-frnd(.2));rnd(1)&&(a.p_hpf_freq=frnd(.3));return a}
function explosion(){var a=Params();rnd(1)?(a.p_base_freq=.1+frnd(.4),a.p_freq_ramp=-.1+frnd(.4)):(a.p_base_freq=.2+frnd(.7),a.p_freq_ramp=-.2-frnd(.2));a.p_base_freq*=a.p_base_freq;0===rnd(4)&&(a.p_freq_ramp=0);0===rnd(2)&&(a.p_repeat_speed=.3+frnd(.5));a.p_env_attack=0;a.p_env_sustain=.1+frnd(.3);a.p_env_decay=frnd(.5);0===rnd(1)&&(a.p_pha_offset=-.3+frnd(.9),a.p_pha_ramp=-frnd(.3));a.p_env_punch=.2+frnd(.6);rnd(1)&&(a.p_vib_strength=frnd(.7),a.p_vib_speed=frnd(.6));0===rnd(2)&&(a.p_arp_speed=.6+
frnd(.3),a.p_arp_mod=.8-frnd(1.6));return a}
function birdSound(){var a=Params();if(1>frnd(10))return a.wave_type=Math.floor(frnd(SHAPES.length)),3===a.wave_type&&(a.wave_type=SQUARE),a.p_env_attack=.4304400932967592+frnd(.2)-.1,a.p_env_sustain=.15739346034252394+frnd(.2)-.1,a.p_env_punch=.004488201744871758+frnd(.2)-.1,a.p_env_decay=.07478075528212291+frnd(.2)-.1,a.p_base_freq=.9865265720147687+frnd(.2)-.1,a.p_freq_limit=0+frnd(.2)-.1,a.p_freq_ramp=-.2995018224359539+frnd(.2)-.1,.5>frnd(1)&&(a.p_freq_ramp=.1+frnd(.15)),a.p_freq_dramp=.004598608156964473+
frnd(.1)-.05,a.p_vib_strength=-.2202799497929496+frnd(.2)-.1,a.p_vib_speed=.8084998703158364+frnd(.2)-.1,a.p_arp_mod=0,a.p_arp_speed=0,a.p_duty=-.9031808754347107+frnd(.2)-.1,a.p_duty_ramp=-.8128699999808343+frnd(.2)-.1,a.p_repeat_speed=.601486018931999+frnd(.2)-.1,a.p_pha_offset=-.9424902314367765+frnd(.2)-.1,a.p_pha_ramp=-.1055482222272056+frnd(.2)-.1,a.p_lpf_freq=.9989765717851521+frnd(.2)-.1,a.p_lpf_ramp=-.25051720626043017+frnd(.2)-.1,a.p_lpf_resonance=.32777871505494693+frnd(.2)-.1,a.p_hpf_freq=
.0023548750981756753+frnd(.2)-.1,a.p_hpf_ramp=-.002375673204842568+frnd(.2)-.1,a;if(1>frnd(10))return a.wave_type=Math.floor(frnd(SHAPES.length)),3===a.wave_type&&(a.wave_type=SQUARE),a.p_env_attack=.5277795946672003+frnd(.2)-.1,a.p_env_sustain=.18243733568468432+frnd(.2)-.1,a.p_env_punch=-.020159754546840117+frnd(.2)-.1,a.p_env_decay=.1561353422051903+frnd(.2)-.1,a.p_base_freq=.9028855606533718+frnd(.2)-.1,a.p_freq_limit=-.008842787837148716,a.p_freq_ramp=-.1,a.p_freq_dramp=-.012891241489551925,
a.p_vib_strength=-.17923136138403065+frnd(.2)-.1,a.p_vib_speed=.908263385610142+frnd(.2)-.1,a.p_arp_mod=.41690153355414894+frnd(.2)-.1,a.p_arp_speed=.0010766233195860704+frnd(.2)-.1,a.p_duty=-.8735363011184684+frnd(.2)-.1,a.p_duty_ramp=-.7397985366747507+frnd(.2)-.1,a.p_repeat_speed=.0591789344172107+frnd(.2)-.1,a.p_pha_offset=-.9961184222777699+frnd(.2)-.1,a.p_pha_ramp=-.08234769395850523+frnd(.2)-.1,a.p_lpf_freq=.9412475115697335+frnd(.2)-.1,a.p_lpf_ramp=-.18261358925834958+frnd(.2)-.1,a.p_lpf_resonance=
.24541438107389477+frnd(.2)-.1,a.p_hpf_freq=-.01831940280978611+frnd(.2)-.1,a.p_hpf_ramp=-.03857383633171346+frnd(.2)-.1,a;if(1>frnd(10))return a.wave_type=Math.floor(frnd(SHAPES.length)),3===a.wave_type&&(a.wave_type=SQUARE),a.p_env_attack=.4304400932967592+frnd(.2)-.1,a.p_env_sustain=.15739346034252394+frnd(.2)-.1,a.p_env_punch=.004488201744871758+frnd(.2)-.1,a.p_env_decay=.07478075528212291+frnd(.2)-.1,a.p_base_freq=.9865265720147687+frnd(.2)-.1,a.p_freq_limit=0+frnd(.2)-.1,a.p_freq_ramp=-.2995018224359539+
frnd(.2)-.1,a.p_freq_dramp=.004598608156964473+frnd(.2)-.1,a.p_vib_strength=-.2202799497929496+frnd(.2)-.1,a.p_vib_speed=.8084998703158364+frnd(.2)-.1,a.p_arp_mod=-.46410459213693644+frnd(.2)-.1,a.p_arp_speed=-.10955361249587248+frnd(.2)-.1,a.p_duty=-.9031808754347107+frnd(.2)-.1,a.p_duty_ramp=-.8128699999808343+frnd(.2)-.1,a.p_repeat_speed=.7014860189319991+frnd(.2)-.1,a.p_pha_offset=-.9424902314367765+frnd(.2)-.1,a.p_pha_ramp=-.1055482222272056+frnd(.2)-.1,a.p_lpf_freq=.9989765717851521+frnd(.2)-
.1,a.p_lpf_ramp=-.25051720626043017+frnd(.2)-.1,a.p_lpf_resonance=.32777871505494693+frnd(.2)-.1,a.p_hpf_freq=.0023548750981756753+frnd(.2)-.1,a.p_hpf_ramp=-.002375673204842568+frnd(.2)-.1,a;if(1<frnd(5))return a.wave_type=Math.floor(frnd(SHAPES.length)),3===a.wave_type&&(a.wave_type=SQUARE),rnd(1)?(a.p_arp_mod=.2697849293151393+frnd(.2)-.1,a.p_arp_speed=-.3131172257760948+frnd(.2)-.1,a.p_base_freq=.8090588299313949+frnd(.2)-.1,a.p_duty=-.6210022920964955+frnd(.2)-.1,a.p_duty_ramp=-4.3441813553182567E-4+
frnd(.2)-.1,a.p_env_attack=.004321877246874195+frnd(.2)-.1,a.p_env_decay=.1+frnd(.2)-.1,a.p_env_punch=.061737781504416146+frnd(.2)-.1,a.p_env_sustain=.4987252564798832+frnd(.2)-.1,a.p_freq_dramp=.31700340314222614+frnd(.2)-.1,a.p_freq_limit=0+frnd(.2)-.1,a.p_freq_ramp=-.163380391341416+frnd(.2)-.1,a.p_hpf_freq=.4709005021145149+frnd(.2)-.1,a.p_hpf_ramp=.6924667290539194+frnd(.2)-.1,a.p_lpf_freq=.8351398631384511+frnd(.2)-.1,a.p_lpf_ramp=.36616557192873134+frnd(.2)-.1,a.p_lpf_resonance=-.08685777111664439+
frnd(.2)-.1,a.p_pha_offset=-.036084571580025544+frnd(.2)-.1,a.p_pha_ramp=-.014806445085568108+frnd(.2)-.1,a.p_repeat_speed=-.8094368475518489+frnd(.2)-.1,a.p_vib_speed=.4496665457171294+frnd(.2)-.1,a.p_vib_strength=.23413762515532424+frnd(.2)-.1):(a.p_arp_mod=-.35697118026766184+frnd(.2)-.1,a.p_arp_speed=.3581140690559588+frnd(.2)-.1,a.p_base_freq=1.3260897696157528+frnd(.2)-.1,a.p_duty=-.30984900436710694+frnd(.2)-.1,a.p_duty_ramp=-.0014374759133411626+frnd(.2)-.1,a.p_env_attack=.3160357835682254+
frnd(.2)-.1,a.p_env_decay=.1+frnd(.2)-.1,a.p_env_punch=.24323114016870148+frnd(.2)-.1,a.p_env_sustain=.4+frnd(.2)-.1,a.p_freq_dramp=.2866475886237244+frnd(.2)-.1,a.p_freq_limit=0+frnd(.2)-.1,a.p_freq_ramp=-.10956352368742976+frnd(.2)-.1,a.p_hpf_freq=.20772718017889846+frnd(.2)-.1,a.p_hpf_ramp=.1564090637378835+frnd(.2)-.1,a.p_lpf_freq=.6021372770637031+frnd(.2)-.1,a.p_lpf_ramp=.24016227139979027+frnd(.2)-.1,a.p_lpf_resonance=-.08787383821160144+frnd(.2)-.1,a.p_pha_offset=-.381597686151701+frnd(.2)-
.1,a.p_pha_ramp=-2.481687661373495E-4+frnd(.2)-.1,a.p_repeat_speed=.07812112809425686+frnd(.2)-.1,a.p_vib_speed=-.13648848579133943+frnd(.2)-.1,a.p_vib_strength=.0018874158972302657+frnd(.2)-.1),a;a.wave_type=Math.floor(frnd(SHAPES.length));if(1===a.wave_type||3===a.wave_type)a.wave_type=2;a.p_base_freq=.85+frnd(.15);a.p_freq_ramp=.3+frnd(.15);a.p_env_attack=0+frnd(.09);a.p_env_sustain=.2+frnd(.3);a.p_env_decay=0+frnd(.1);a.p_duty=frnd(2)-1;a.p_duty_ramp=Math.pow(frnd(2)-1,3);a.p_repeat_speed=.5+
frnd(.1);a.p_pha_offset=-.3+frnd(.9);a.p_pha_ramp=-frnd(.3);a.p_arp_speed=.4+frnd(.6);a.p_arp_mod=.8+frnd(.1);a.p_lpf_resonance=frnd(2)-1;a.p_lpf_freq=1-Math.pow(frnd(1),3);a.p_lpf_ramp=Math.pow(frnd(2)-1,3);.1>a.p_lpf_freq&&-.05>a.p_lpf_ramp&&(a.p_lpf_ramp=-a.p_lpf_ramp);a.p_hpf_freq=Math.pow(frnd(1),5);a.p_hpf_ramp=Math.pow(frnd(2)-1,5);return a}
function pushSound(){var a=Params();a.wave_type=Math.floor(frnd(SHAPES.length));2===a.wave_type&&a.wave_type++;0===a.wave_type&&(a.wave_type=NOISE);a.p_base_freq=.1+frnd(.4);a.p_freq_ramp=.05+frnd(.2);a.p_env_attack=.01+frnd(.09);a.p_env_sustain=.01+frnd(.09);a.p_env_decay=.01+frnd(.09);a.p_repeat_speed=.3+frnd(.5);a.p_pha_offset=-.3+frnd(.9);a.p_pha_ramp=-frnd(.3);a.p_arp_speed=.6+frnd(.3);a.p_arp_mod=.8-frnd(1.6);return a}
function powerUp(){var a=Params();rnd(1)?a.wave_type=SAWTOOTH:a.p_duty=frnd(.6);a.wave_type=Math.floor(frnd(SHAPES.length));3===a.wave_type&&(a.wave_type=SQUARE);rnd(1)?(a.p_base_freq=.2+frnd(.3),a.p_freq_ramp=.1+frnd(.4),a.p_repeat_speed=.4+frnd(.4)):(a.p_base_freq=.2+frnd(.3),a.p_freq_ramp=.05+frnd(.2),rnd(1)&&(a.p_vib_strength=frnd(.7),a.p_vib_speed=frnd(.6)));a.p_env_attack=0;a.p_env_sustain=frnd(.4);a.p_env_decay=.1+frnd(.4);return a}
function hitHurt(){var a=Params();a.wave_type=rnd(2);a.wave_type===SINE&&(a.wave_type=NOISE);a.wave_type===SQUARE&&(a.p_duty=frnd(.6));a.wave_type=Math.floor(frnd(SHAPES.length));a.p_base_freq=.2+frnd(.6);a.p_freq_ramp=-.3-frnd(.4);a.p_env_attack=0;a.p_env_sustain=frnd(.1);a.p_env_decay=.1+frnd(.2);rnd(1)&&(a.p_hpf_freq=frnd(.3));return a}
function jump(){var a=Params();a.wave_type=SQUARE;a.wave_type=Math.floor(frnd(SHAPES.length));3===a.wave_type&&(a.wave_type=SQUARE);a.p_duty=frnd(.6);a.p_base_freq=.3+frnd(.3);a.p_freq_ramp=.1+frnd(.2);a.p_env_attack=0;a.p_env_sustain=.1+frnd(.3);a.p_env_decay=.1+frnd(.2);rnd(1)&&(a.p_hpf_freq=frnd(.3));rnd(1)&&(a.p_lpf_freq=1-frnd(.6));return a}
function blipSelect(){var a=Params();a.wave_type=rnd(1);a.wave_type=Math.floor(frnd(SHAPES.length));3===a.wave_type&&(a.wave_type=rnd(1));a.wave_type===SQUARE&&(a.p_duty=frnd(.6));a.p_base_freq=.2+frnd(.4);a.p_env_attack=0;a.p_env_sustain=.1+frnd(.1);a.p_env_decay=frnd(.2);a.p_hpf_freq=.1;return a}
function random(){var a=Params();a.wave_type=Math.floor(frnd(SHAPES.length));a.p_base_freq=Math.pow(frnd(2)-1,2);rnd(1)&&(a.p_base_freq=Math.pow(frnd(2)-1,3)+.5);a.p_freq_limit=0;a.p_freq_ramp=Math.pow(frnd(2)-1,5);.7<a.p_base_freq&&.2<a.p_freq_ramp&&(a.p_freq_ramp=-a.p_freq_ramp);.2>a.p_base_freq&&-.05>a.p_freq_ramp&&(a.p_freq_ramp=-a.p_freq_ramp);a.p_freq_dramp=Math.pow(frnd(2)-1,3);a.p_duty=frnd(2)-1;a.p_duty_ramp=Math.pow(frnd(2)-1,3);a.p_vib_strength=Math.pow(frnd(2)-1,3);a.p_vib_speed=frnd(2)-
1;a.p_env_attack=Math.pow(frnd(2)-1,3);a.p_env_sustain=Math.pow(frnd(2)-1,2);a.p_env_decay=frnd(2)-1;a.p_env_punch=Math.pow(frnd(.8),2);.2>a.p_env_attack+a.p_env_sustain+a.p_env_decay&&(a.p_env_sustain+=.2+frnd(.3),a.p_env_decay+=.2+frnd(.3));a.p_lpf_resonance=frnd(2)-1;a.p_lpf_freq=1-Math.pow(frnd(1),3);a.p_lpf_ramp=Math.pow(frnd(2)-1,3);.1>a.p_lpf_freq&&-.05>a.p_lpf_ramp&&(a.p_lpf_ramp=-a.p_lpf_ramp);a.p_hpf_freq=Math.pow(frnd(1),5);a.p_hpf_ramp=Math.pow(frnd(2)-1,5);a.p_pha_offset=Math.pow(frnd(2)-
1,3);a.p_pha_ramp=Math.pow(frnd(2)-1,3);a.p_repeat_speed=frnd(2)-1;a.p_arp_speed=frnd(2)-1;a.p_arp_mod=frnd(2)-1;return a}var generators=[pickupCoin,laserShoot,explosion,powerUp,hitHurt,jump,blipSelect,pushSound,random,birdSound],generatorNames="pickupCoin laserShoot explosion powerUp hitHurt jump blipSelect pushSound random birdSound".split(" ");function generateFromSeed(a){rng=new RNG(a/100|0);var b=generators[a%100%generators.length];seeded=!0;b=b();b.seed=a;seeded=!1;return b}
function SoundEffect(a,b){this._buffer=AUDIO_CONTEXT.createBuffer(1,a,b)}SoundEffect.prototype.getBuffer=function(){return this._buffer.getChannelData(0)};
function ULBS(){if("suspended"===AUDIO_CONTEXT.state){var a=function(){AUDIO_CONTEXT.resume().then(function(){document.body.removeEventListener("touchstart",a);document.body.removeEventListener("touchend",a);document.body.removeEventListener("mousedown",a);document.body.removeEventListener("mouseup",a);document.body.removeEventListener("keydown",a);document.body.removeEventListener("keyup",a)})};document.body.addEventListener("touchstart",a,!1);document.body.addEventListener("touchend",a,!1);document.body.addEventListener("mousedown",
a,!1);document.body.addEventListener("mouseup",a,!1);document.body.addEventListener("keydown",a,!1);document.body.addEventListener("keyup",a,!1)}}
SoundEffect.prototype.play=function(){ULBS();var a=AUDIO_CONTEXT.createBufferSource(),b=AUDIO_CONTEXT.createBiquadFilter(),h=AUDIO_CONTEXT.createBiquadFilter(),e=AUDIO_CONTEXT.createBiquadFilter();a.buffer=this._buffer;a.connect(b);b.frequency.value=1600;h.frequency.value=1600;e.frequency.value=1600;b.connect(h);h.connect(e);e.connect(AUDIO_CONTEXT.destination);b=AUDIO_CONTEXT.currentTime;"undefined"!=typeof a.start?a.start(b):a.noteOn(b);a.onended=function(){e.disconnect()}};
SoundEffect.MIN_SAMPLE_RATE=22050;"undefined"==typeof AUDIO_CONTEXT&&(SoundEffect=function(a,b){this._sample_rate=b;this._buffer=Array(a);this._audioElement=null},SoundEffect.prototype.getBuffer=function(){this._audioElement=null;return this._buffer},SoundEffect.prototype.play=function(){this._audioElement?this._audioElement.cloneNode(!1).play():console.log("URR")},SoundEffect.MIN_SAMPLE_RATE=1);
SoundEffect.generate=function(a){function b(){h=0;e=100/(a.p_base_freq*a.p_base_freq+.001);p=Math.floor(e);E=100/(a.p_freq_limit*a.p_freq_limit+.001);F=1-.01*Math.pow(a.p_freq_ramp,3);M=1E-6*-Math.pow(a.p_freq_dramp,3);q=.5-.5*a.p_duty;N=5E-5*-a.p_duty_ramp;O=0<=a.p_arp_mod?1-.9*Math.pow(a.p_arp_mod,2):1+10*Math.pow(a.p_arp_mod,2);A=Math.floor(2E4*Math.pow(1-a.p_arp_speed,2)+32);1==a.p_arp_speed&&(A=0)}var h,e,E,F,M,q,N,O;b();var v=0,w=0,r=.1*Math.pow(a.p_lpf_freq,3),X=1+1E-4*a.p_lpf_ramp,G=5/(1+
20*Math.pow(a.p_lpf_resonance,2))*(.01+r);.8<G&&(G=.8);var H=0,t=.1*Math.pow(a.p_hpf_freq,2),P=1+3E-4*a.p_hpf_ramp,Q=0,Y=.01*Math.pow(a.p_vib_speed,2),R=.5*a.p_vib_strength,S=0,k=0,u=0,l=[Math.floor(a.p_env_attack*a.p_env_attack*1E5),Math.floor(a.p_env_sustain*a.p_env_sustain*1E5),Math.floor(a.p_env_decay*a.p_env_decay*1E5)],B=l[0]+l[1]+l[2],x=0,y=1020*Math.pow(a.p_pha_offset,2);0>a.p_pha_offset&&(y=-y);var I=1*Math.pow(a.p_pha_ramp,2);0>a.p_pha_ramp&&(I=-I);for(var g=Math.abs(Math.floor(y)),C=0,
J=[],c=0;1024>c;++c)J[c]=0;var K=[];for(c=0;32>c;++c)K[c]=2*Math.random()-1;var L=Math.floor(2E4*Math.pow(1-a.p_repeat_speed,2)+32);0==a.p_repeat_speed&&(L=0);var T=Math.exp(a.sound_vol)-1,D=0,U=0,z=Math.floor(44100/a.sample_rate),m=0;g=Math.ceil(B/z);B=a.sample_rate<SoundEffect.MIN_SAMPLE_RATE?new SoundEffect(4*g,SoundEffect.MIN_SAMPLE_RATE):new SoundEffect(g,a.sample_rate);for(var n=B.getBuffer(),V=0;;++V){0!=L&&++h>=L&&b();if(0!=A&&V>=A){var A=0;e*=O}F+=M;e*=F;e>E&&(e=E);g=e;0<R&&(Q+=Y,g=e*(1+
Math.sin(Q)*R));var p=Math.floor(g);8>p&&(p=8);q+=N;0>q&&(q=0);.5<q&&(q=.5);u++;if(u>l[k]){u=1;for(k++;3>k&&0===l[k];)k++;if(3===k)break}S=0===k?u/l[0]:1===k?1+2*Math.pow(1-u/l[1],1)*a.p_env_punch:1-u/l[2];y+=I;g=Math.abs(Math.floor(y));1023<g&&(g=1023);0!=P&&(t*=P,1E-5>t&&(t=1E-5),.1<t&&(t=.1));for(var d=0,W=0;8>W;++W){var f=0;x++;if(x>=p&&(x%=p,a.wave_type===NOISE))for(c=0;32>c;++c)K[c]=2*Math.random()-1;c=x/p;a.wave_type===SQUARE?f=c<q?.5:-.5:a.wave_type===SAWTOOTH?f=1-2*c:a.wave_type===SINE?f=
Math.sin(2*c*Math.PI):a.wave_type===NOISE?f=K[Math.floor(32*x/p)]:a.wave_type===TRIANGLE?f=Math.abs(1-2*c)-1:a.wave_type===BREAKER&&(f=Math.abs(1-c*c*2)-1);c=v;r*=X;0>r&&(r=0);.1<r&&(r=.1);1!=a.p_lpf_freq?(w+=(f-v)*r,w-=w*G):(v=f,w=0);v+=w;H+=v-c;f=H-=H*t;J[C&1023]=f;f+=J[C-g+1024&1023];C=C+1&1023;d+=f*S}D+=d;++U>=z&&(U=0,d=D/z,D=0,d=d/8*masterVolume,d*=T,n[m++]=d,a.sample_rate<SoundEffect.MIN_SAMPLE_RATE&&(n[m++]=d,n[m++]=d,n[m++]=d))}0<z&&(d=D/z/8*masterVolume,d*=T,n[m++]=d,a.sample_rate<SoundEffect.MIN_SAMPLE_RATE&&
(n[m++]=d,n[m++]=d,n[m++]=d));return B};var sfxCache={},cachedSeeds=[],CACHE_MAX=50;function cacheSeed(a){if(a in sfxCache)return sfxCache[a];var b=generateFromSeed(a);b.sound_vol=SOUND_VOL;b.sample_rate=SAMPLE_RATE;b.bit_depth=BIT_DEPTH;b=SoundEffect.generate(b);sfxCache[a]=b;for(cachedSeeds.push(a);cachedSeeds.length>CACHE_MAX;)a=cachedSeeds[0],cachedSeeds=cachedSeeds.slice(1),delete sfxCache[a];return b}function playSound(a){muted||(checkAudioContextExists(),unitTesting||cacheSeed(a).play())}
function killAudioButton(){var a=document.getElementById("muteButton"),b=document.getElementById("unMuteButton");a&&(a.remove(),b.remove())}function showAudioButton(){var a=document.getElementById("muteButton"),b=document.getElementById("unMuteButton");a&&(a.style.display="block",b.style.display="none")}function toggleMute(){0===muted?muteAudio():unMuteAudio()}
function muteAudio(){muted=1;var a=document.getElementById("muteButton"),b=document.getElementById("unMuteButton");a&&(a.style.display="none",b.style.display="block")}function unMuteAudio(){muted=0;var a=document.getElementById("muteButton"),b=document.getElementById("unMuteButton");a&&(a.style.display="block",b.style.display="none")};
